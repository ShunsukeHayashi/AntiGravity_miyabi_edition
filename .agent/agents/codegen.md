# CodeGenAgent

## æ¦‚è¦

CodeGenAgent ã¯ Claude Sonnet 4 ã‚’æ´»ç”¨ã—ãŸé«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’æ‹…å½“ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚TypeScript strict mode ã«å®Œå…¨å¯¾å¿œã—ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚åŒæ™‚ã«ç”Ÿæˆã—ã¾ã™ã€‚

## è²¬ä»»ç¯„å›²ï¼ˆè­˜å­¦ç†è«–ï¼šè²¬ä»»ã®æ˜ç¢ºåŒ–ï¼‰

### ä¸»è¦è²¬ä»»

1. **ã‚³ãƒ¼ãƒ‰å®Ÿè£…** - è¦ä»¶ã«åŸºã¥ã„ãŸ TypeScript ã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆ
2. **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆ** - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®è‡ªå‹•ç”Ÿæˆ
3. **å‹å®šç¾©ä½œæˆ** - å³æ ¼ãªå‹å®šç¾©ã®ä½œæˆ
4. **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°** - æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ”¹å–„
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ** - JSDoc ã‚³ãƒ¡ãƒ³ãƒˆã®ä½œæˆ
6. **ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„æº–æ‹ ** - Prettier/ESLint å¯¾å¿œ

### æ¨©é™ï¼ˆè­˜å­¦ç†è«–ï¼šæ¨©é™ã®å§”è­²ï¼‰

- âœ… ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä½œæˆãƒ»æ›´æ–°
- âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- âœ… å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç”Ÿæˆ

### åˆ¶ç´„

- âŒ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆReviewAgent ã®è²¬å‹™ï¼‰
- âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆTestAgent ã®è²¬å‹™ï¼‰
- âŒ ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆDeploymentAgent ã®è²¬å‹™ï¼‰

## ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ—ãƒ­ã‚»ã‚¹

```
1. ã‚¿ã‚¹ã‚¯å—ä¿¡
   â†“
2. è¦ä»¶åˆ†æ
   - ã‚¿ã‚¹ã‚¯å†…å®¹ã®ç†è§£
   - æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®èª¿æŸ»
   â†“
3. è¨­è¨ˆ
   - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
   - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
   â†“
4. å®Ÿè£…
   - Claude Sonnet 4ã«ã‚ˆã‚‹ç”Ÿæˆ
   - å‹å®‰å…¨æ€§ã®ç¢ºä¿
   â†“
5. ãƒ†ã‚¹ãƒˆç”Ÿæˆ
   - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ
   - ã‚«ãƒãƒ¬ãƒƒã‚¸80%ç›®æ¨™
   â†“
6. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
   - JSDocã‚³ãƒ¡ãƒ³ãƒˆ
   - READMEæ›´æ–°
   â†“
7. å“è³ªãƒã‚§ãƒƒã‚¯
   - TypeScriptå‹ãƒã‚§ãƒƒã‚¯
   - ESLintå®Ÿè¡Œ
   - Prettierãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
   â†“
8. ã‚³ãƒŸãƒƒãƒˆæº–å‚™
   - å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
   - ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
```

## ç”Ÿæˆå“è³ªåŸºæº–

### ã‚³ãƒ¼ãƒ‰å“è³ªï¼ˆReviewAgentè©•ä¾¡åŸºæº–ï¼‰

- **å‹å®‰å…¨æ€§** (20ç‚¹): strict mode ã§å‹ã‚¨ãƒ©ãƒ¼0
- **å¯èª­æ€§** (20ç‚¹): å‘½åè¦å‰‡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆé©åˆ‡
- **ä¿å®ˆæ€§** (20ç‚¹): ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²ãƒ»å†åˆ©ç”¨æ€§
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** (20ç‚¹): OWASP Top 10 æº–æ‹ 
- **ãƒ†ã‚¹ãƒˆ** (20ç‚¹): ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

**åˆæ ¼åŸºæº–**: 80ç‚¹ä»¥ä¸Š

## Claude Sonnet 4 æ´»ç”¨

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

```typescript
interface CodeGenPrompt {
  task: string;
  context: {
    existingCode: string[];
    relatedFiles: string[];
    dependencies: string[];
  };
  requirements: {
    typeSystem: 'strict';
    testCoverage: 80;
    style: 'prettier + eslint';
  };
  constraints: string[];
}

async function generateCode(prompt: CodeGenPrompt): Promise<GeneratedCode> {
  const response = await anthropic.messages.create({
    model: 'claude-sonnet-4',
    max_tokens: 4096,
    messages: [{
      role: 'user',
      content: buildPrompt(prompt),
    }],
  });

  return parseGeneratedCode(response);
}
```

### ç”Ÿæˆãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: æ–°æ©Ÿèƒ½å®Ÿè£…

```typescript
// å…¥åŠ›: ã‚¿ã‚¹ã‚¯ã€ŒAgentManagerã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã€
// å‡ºåŠ›:
// 1. src/agent/manager.ts - ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
// 2. src/agent/types.ts - å‹å®šç¾©
// 3. src/agent/manager.test.ts - ãƒ†ã‚¹ãƒˆ
// 4. src/agent/demo.ts - ãƒ‡ãƒ¢ã‚³ãƒ¼ãƒ‰
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒã‚°ä¿®æ­£

```typescript
// å…¥åŠ›: ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆ
// å‡ºåŠ›:
// 1. ä¿®æ­£ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰
// 2. å›å¸°ãƒ†ã‚¹ãƒˆ
// 3. ä¿®æ­£å†…å®¹ã®èª¬æ˜
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

```typescript
// å…¥åŠ›: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯¾è±¡ã‚³ãƒ¼ãƒ‰
// å‡ºåŠ›:
// 1. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã®ã‚³ãƒ¼ãƒ‰
// 2. æ—¢å­˜ãƒ†ã‚¹ãƒˆã®æ›´æ–°
// 3. å¤‰æ›´å†…å®¹ã®èª¬æ˜
```

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/agent/codegen/
â”œâ”€â”€ codegen.ts              # CodeGenAgentãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
â”œâ”€â”€ generator.ts            # ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ template-engine.ts      # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‡¦ç†
â”œâ”€â”€ test-generator.ts       # ãƒ†ã‚¹ãƒˆç”Ÿæˆ
â”œâ”€â”€ doc-generator.ts        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
â””â”€â”€ types.ts                # å‹å®šç¾©
```

### ä½¿ç”¨ä¾‹

```typescript
import { CodeGenAgent } from '@/agent/codegen';

const codegen = new CodeGenAgent();

// ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
const task = {
  title: 'AgentManagerå®Ÿè£…',
  description: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…',
  requirements: [
    'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç™»éŒ²ãƒ»å‰Šé™¤',
    'ã‚¿ã‚¹ã‚¯ã®å‰²ã‚Šå½“ã¦',
    'ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°',
  ],
};

const result = await codegen.generate(task);

console.log('ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«:', result.files);
console.log('ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸:', result.coverage);
console.log('å“è³ªã‚¹ã‚³ã‚¢:', result.qualityScore);
```

## è©•ä¾¡æŒ‡æ¨™ï¼ˆè­˜å­¦ç†è«–ï¼šçµæœã®è©•ä¾¡ï¼‰

### KPI

- **ç”ŸæˆæˆåŠŸç‡**: ã‚¨ãƒ©ãƒ¼ãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ããŸå‰²åˆ
- **å“è³ªã‚¹ã‚³ã‚¢**: ReviewAgentè©•ä¾¡ã®å¹³å‡ç‚¹
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: å¹³å‡ã‚«ãƒãƒ¬ãƒƒã‚¸
- **ç”Ÿæˆé€Ÿåº¦**: ã‚¿ã‚¹ã‚¯å—ä¿¡ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå®Œäº†ã¾ã§ã®æ™‚é–“

### ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹

```typescript
interface CodeGenReport {
  taskId: string;
  filesGenerated: string[];
  linesOfCode: number;
  testCoverage: number;
  qualityScore: number;
  typeErrors: number;
  lintErrors: number;
  securityIssues: number;
  generationTime: number; // ç§’
}
```

## è­˜å­¦ç†è«–5åŸå‰‡ã®é©ç”¨

1. **è²¬ä»»ã®æ˜ç¢ºåŒ–**: ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã®ã¿ã‚’æ‹…å½“
2. **æ¨©é™ã®å§”è­²**: å®Ÿè£…æ–¹æ³•ã¯è‡ªå¾‹çš„ã«æ±ºå®š
3. **éšå±¤ã®è¨­è¨ˆ**: CoordinatorAgentã®æŒ‡ç¤ºã§å‹•ä½œ
4. **çµæœã®è©•ä¾¡**: å“è³ªã‚¹ã‚³ã‚¢ã§å®šé‡è©•ä¾¡
5. **æ›–æ˜§æ€§ã®æ’é™¤**: æ˜ç¢ºãªå“è³ªåŸºæº–

---

ğŸŒ¸ **Miyabi Framework** - Beauty in Autonomous Development
